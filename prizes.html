<!DOCTYPE html>
<html>
  <head>
    <title>Практична робота №7: AR з маркером Hiro</title>
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <!-- Підключення бібліотеки AR.js -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  </head>
  <body style="margin : 0px; overflow: hidden;">

    <script>

      let prizeSlot = "7";

      AFRAME.registerComponent('prizeslots', {
          init: function () 
          {
              let marker = this.el;
      
              marker.addEventListener('markerFound', function() {
                if (prizeSlot!=-1){
                  if (prizeSlot==marker.getAttribute("value")){
                      alert("prize found")
                  }else{
                    alert("prize not here")
                  }                  
                }else{
                  alert("prize already taken")
                }

                  // console.log( markerVisible );
              });
      
              marker.addEventListener('markerLost', function() {
                  if (prizeSlot==marker.getAttribute("value")){
                    prizeSlot=-1
                  }
                  // console.log( markerVisible );
              });
          }
      });
      
      
      </script>
      
      <a-scene embedded vr-mode-ui="enabled: false;" arjs="debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;">
      
          <a-assets>
          <img id="grid" src="images/border.png" />
        </a-assets>
          
          
          <a-marker type="barcode" value="0" prizeslots>
              <!-- <a-plane position="0 0 0" 
                       rotation="-90 0 0"
                     material="color: red">
              </a-plane> -->
          </a-marker>
      
          <a-marker type="barcode" value="1" prizeslots>
              <!-- <a-plane position="0 0 0" 
                       rotation="-90 0 0"
                     material="color: yellow">
              </a-plane> -->
          </a-marker>
      
          <a-marker type="barcode" value="2" prizeslots>
              <!-- <a-plane position="0 0 0" 
                       rotation="-90 0 0"
                     material="color: blue">
              </a-plane> -->
          </a-marker>
      
          <a-marker type="barcode" value="9" prizeslots>
              <!-- <a-plane position="0 0 0" 
                       rotation="-90 0 0"
                     material="color: blue">
              </a-plane> -->
          </a-marker>
      
          <a-marker type="barcode" value="7" prizeslots>
              <!-- <a-plane position="0 0 0" 
                       rotation="-90 0 0"
                     material="color: blue">
              </a-plane> -->
          </a-marker>
          
          <a-entity camera></a-entity>
          <a-entity loop></a-entity>
          
      </a-scene>
  </body>
</html>
